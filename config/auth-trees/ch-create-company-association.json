{
  "nodes": [
    {
      "_id": "0207683b-7437-4441-aa6b-a143ac0ab576",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "hasSession",
          "noSession"
        ],
        "outputs": [
          "*"
        ],
        "script": "c4001e02-469c-4cc4-bf95-9f43d7e46568"
      }
    },
    {
      "_id": "54a93ee3-d273-49b6-8d23-0fd1dcb6320b",
      "nodeType": "SessionDataNode",
      "details": {
        "sharedStateKey": "userName",
        "sessionDataKey": "UserToken"
      }
    },
    {
      "_id": "e04ef6d2-daec-403e-93a1-f8b60a8f634b",
      "nodeType": "IdentifyExistingUserNode",
      "details": {
        "identifier": "userName",
        "identityAttribute": "mail"
      }
    },
    {
      "_id": "3f37ce1b-c569-4229-a331-9bedf3ceb9af",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "true",
          "false"
        ],
        "outputs": [
          "*"
        ],
        "script": "838ab622-d892-44e6-a5c5-f45238aed210"
      }
    },
    {
      "_id": "ef37be85-8d9f-4140-aa6a-b8c8cc19a695",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "success",
          "error"
        ],
        "outputs": [
          "*"
        ],
        "script": "c0ab8c9c-b9b2-4bb7-b427-f10ddf9db149"
      }
    },
    {
      "_id": "e5c64e99-5259-4e93-bb25-1871b370f7cd",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "success",
          "error"
        ],
        "outputs": [
          "*"
        ],
        "script": "c0ab8c9c-b9b2-4bb7-b427-f10ddf9db149"
      }
    },
    {
      "_id": "a011052d-bbf2-4dd9-93fc-bf96e3d9b7f6",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "true",
          "false",
          "error",
          "other"
        ],
        "outputs": [
          "*"
        ],
        "script": "55801756-11bf-493d-b49c-195488cf939a"
      }
    },
    {
      "_id": "b2401c4a-636f-43e4-b129-be18fccf30f3",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "true",
          "error",
          "already_associated",
          "auth_code_inactive"
        ],
        "outputs": [
          "*"
        ],
        "script": "16975ea5-4f0a-4ac6-861f-00dbf39ca441"
      }
    },
    {
      "_id": "78204b08-ebbd-4b61-8b1b-080a1061987a",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "true"
        ],
        "outputs": [
          "*"
        ],
        "script": "10f63087-b21b-40eb-9c90-8e3fb3fabfa1"
      }
    },
    {
      "_id": "55ab38cb-458d-4c6c-ba34-3586bf34b06c",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "true",
          "false"
        ],
        "outputs": [
          "*"
        ],
        "script": "ad7a63a6-fae2-46c0-be70-bec1f059f064"
      }
    },
    {
      "_id": "c5f729d0-922d-44f8-a480-aa34d2ca02d8",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "true"
        ],
        "outputs": [
          "*"
        ],
        "script": "917f36a9-f21e-43e4-bed5-9b2171228387"
      }
    },
    {
      "_id": "ba60739d-61f1-4ede-bf94-3f3dc628a38d",
      "nodeType": "RetryLimitDecisionNode",
      "details": {
        "incrementUserAttributeOnFailure": false,
        "retryLimit": 3
      }
    },
    {
      "_id": "c7714228-4b3d-403c-8807-39c028bf549c",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "inputs": [
          "*"
        ],
        "outcomes": [
          "true"
        ],
        "outputs": [
          "*"
        ],
        "script": "fdac4efb-d8b8-478b-8300-e11a4c3503df"
      }
    },
    {
      "_id": "93328e47-3918-42c3-a27d-b5cf6c1abb67",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "outcomes": [
          "true",
          "false"
        ],
        "inputs": [
          "*"
        ],
        "outputs": [
          "*"
        ],
        "script": "df75d4ae-8f25-48f4-af14-bb87206e029d"
      }
    },
    {
      "_id": "a35dc8d4-66a5-4e6e-b3e0-9a7612d52bbb",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "outcomes": [
          "success",
          "error"
        ],
        "inputs": [
          "*"
        ],
        "outputs": [
          "*"
        ],
        "script": "1b3c84cf-411a-4e5b-998f-768191e735f1"
      }
    },
    {
      "_id": "95966d43-e698-432d-b3d8-2f8fb0e98276",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "outcomes": [
          "true"
        ],
        "inputs": [
          "*"
        ],
        "outputs": [
          "*"
        ],
        "script": "e69b137b-1bae-4804-af6b-6a93371733ca"
      }
    },
    {
      "_id": "537ff588-0447-4938-b1be-bce4fe9869ce",
      "nodeType": "ScriptedDecisionNode",
      "details": {
        "outcomes": [
          "true",
          "false"
        ],
        "inputs": [
          "*"
        ],
        "outputs": [
          "*"
        ],
        "script": "df67765e-df3a-4503-9ba5-35c992b39259"
      }
    }
  ],
  "tree": {
    "_id": "CHCompanyAssociation",
    "description": "As an authenticated user, enter a company number, company auth code and create an association with that company",
    "identityResource": "managed/alpha_user",
    "uiConfig": {},
    "entryNodeId": "0207683b-7437-4441-aa6b-a143ac0ab576",
    "nodes": {
      "0207683b-7437-4441-aa6b-a143ac0ab576": {
        "x": 175,
        "y": 402.015625,
        "connections": {
          "hasSession": "54a93ee3-d273-49b6-8d23-0fd1dcb6320b",
          "noSession": "95966d43-e698-432d-b3d8-2f8fb0e98276"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "check session"
      },
      "3f37ce1b-c569-4229-a331-9bedf3ceb9af": {
        "x": 559,
        "y": 26.015625,
        "connections": {
          "false": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "true": "ef37be85-8d9f-4140-aa6a-b8c8cc19a695"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Enter company No"
      },
      "54a93ee3-d273-49b6-8d23-0fd1dcb6320b": {
        "x": 222,
        "y": 238.015625,
        "connections": {
          "outcome": "e04ef6d2-daec-403e-93a1-f8b60a8f634b"
        },
        "nodeType": "SessionDataNode",
        "displayName": "Get Session Data"
      },
      "55ab38cb-458d-4c6c-ba34-3586bf34b06c": {
        "x": 1097,
        "y": 30,
        "connections": {
          "false": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "true": "93328e47-3918-42c3-a27d-b5cf6c1abb67"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Enter Auth Code"
      },
      "78204b08-ebbd-4b61-8b1b-080a1061987a": {
        "x": 1707,
        "y": 532.015625,
        "connections": {
          "true": "70e691a5-1e33-4ac3-a356-e7b6d60d92e0"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Confirmation"
      },
      "93328e47-3918-42c3-a27d-b5cf6c1abb67": {
        "x": 1285,
        "y": 33.015625,
        "connections": {
          "false": "c5f729d0-922d-44f8-a480-aa34d2ca02d8",
          "true": "e5c64e99-5259-4e93-bb25-1871b370f7cd"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Validate Cleartext Auth Code"
      },
      "a011052d-bbf2-4dd9-93fc-bf96e3d9b7f6": {
        "x": 916,
        "y": 182.015625,
        "connections": {
          "error": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "false": "3f37ce1b-c569-4229-a331-9bedf3ceb9af",
          "true": "55ab38cb-458d-4c6c-ba34-3586bf34b06c",
          "other": "3f37ce1b-c569-4229-a331-9bedf3ceb9af"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "get company data"
      },
      "b2401c4a-636f-43e4-b129-be18fccf30f3": {
        "x": 1683,
        "y": 142.015625,
        "connections": {
          "already_associated": "3f37ce1b-c569-4229-a331-9bedf3ceb9af",
          "auth_code_inactive": "3f37ce1b-c569-4229-a331-9bedf3ceb9af",
          "error": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "true": "537ff588-0447-4938-b1be-bce4fe9869ce"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Create Association"
      },
      "ba60739d-61f1-4ede-bf94-3f3dc628a38d": {
        "x": 1289,
        "y": 409.015625,
        "connections": {
          "Reject": "c7714228-4b3d-403c-8807-39c028bf549c",
          "Retry": "55ab38cb-458d-4c6c-ba34-3586bf34b06c"
        },
        "nodeType": "RetryLimitDecisionNode",
        "displayName": "Retry Limit Decision"
      },
      "c5f729d0-922d-44f8-a480-aa34d2ca02d8": {
        "x": 1303,
        "y": 247,
        "connections": {
          "true": "ba60739d-61f1-4ede-bf94-3f3dc628a38d"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Auth Code Error Message"
      },
      "c7714228-4b3d-403c-8807-39c028bf549c": {
        "x": 1436,
        "y": 629.015625,
        "connections": {},
        "nodeType": "ScriptedDecisionNode",
        "displayName": "max attempts message"
      },
      "e04ef6d2-daec-403e-93a1-f8b60a8f634b": {
        "x": 299.40625,
        "y": 37.015625,
        "connections": {
          "false": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "true": "3f37ce1b-c569-4229-a331-9bedf3ceb9af"
        },
        "nodeType": "IdentifyExistingUserNode",
        "displayName": "Identify Existing User"
      },
      "e5c64e99-5259-4e93-bb25-1871b370f7cd": {
        "x": 1534,
        "y": 37.015625,
        "connections": {
          "error": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "success": "b2401c4a-636f-43e4-b129-be18fccf30f3"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "get IDM token again"
      },
      "ef37be85-8d9f-4140-aa6a-b8c8cc19a695": {
        "x": 790,
        "y": 22.015625,
        "connections": {
          "error": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "success": "a011052d-bbf2-4dd9-93fc-bf96e3d9b7f6"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "get IDM token"
      },
      "a35dc8d4-66a5-4e6e-b3e0-9a7612d52bbb": {
        "x": 1629,
        "y": 410.015625,
        "connections": {
          "success": "78204b08-ebbd-4b61-8b1b-080a1061987a",
          "error": "95966d43-e698-432d-b3d8-2f8fb0e98276"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Notify Company Members"
      },
      "95966d43-e698-432d-b3d8-2f8fb0e98276": {
        "x": 917,
        "y": 755.015625,
        "connections": {},
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Generic error"
      },
      "537ff588-0447-4938-b1be-bce4fe9869ce": {
        "x": 1641,
        "y": 303.015625,
        "connections": {
          "false": "95966d43-e698-432d-b3d8-2f8fb0e98276",
          "true": "a35dc8d4-66a5-4e6e-b3e0-9a7612d52bbb"
        },
        "nodeType": "ScriptedDecisionNode",
        "displayName": "Create Notify JWT"
      }
    },
    "staticNodes": {
      "startNode": {
        "x": 50,
        "y": 250
      },
      "70e691a5-1e33-4ac3-a356-e7b6d60d92e0": {
        "x": 2020,
        "y": 128
      },
      "e301438c-0bd0-429c-ab0c-66126501069a": {
        "x": 1572,
        "y": 777
      }
    }
  }
}